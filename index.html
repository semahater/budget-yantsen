<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#B8D4E3">
    <title>–°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç –Ø–Ω—Ü–µ–Ω</title>

    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/styles.css">

    <!-- Chart.js –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-top">
            <h1 class="header-title">üí∞ –ë—é–¥–∂–µ—Ç –Ø–Ω—Ü–µ–Ω</h1>
            <div id="sync-status">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
        <div class="month-selector">
            <button class="month-btn" id="prev-month">‚Üê</button>
            <span id="current-month">–ù–æ—è–±—Ä—å 2025</span>
            <button class="month-btn" id="next-month">‚Üí</button>
            <button class="month-btn" id="reset-month">‚äï</button>
        </div>
    </header>

    <!-- Main Container -->
    <main class="container">
        <!-- Dashboard Screen -->
        <div class="screen active" id="dashboard-screen">
            <!-- Balance Cards -->
            <div class="balance-cards">
                <div class="balance-card">
                    <div class="balance-label">–î–æ—Ö–æ–¥</div>
                    <div class="balance-amount" id="income-amount">0 ‚ÇΩ</div>
                </div>
                <div class="balance-card">
                    <div class="balance-label">–†–∞—Å—Ö–æ–¥—ã</div>
                    <div class="balance-amount" id="expenses-amount">0 ‚ÇΩ</div>
                </div>
                <div class="balance-card">
                    <div class="balance-label">–ë–∞–ª–∞–Ω—Å</div>
                    <div class="balance-amount" id="balance-amount">0 ‚ÇΩ</div>
                </div>
            </div>

            <!-- Chart -->
            <div class="chart-container">
                <h3>üìä –†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
                <canvas id="expenses-chart"></canvas>
            </div>

            <!-- Recent Transactions -->
            <div class="transactions-list">
                <h3>üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</h3>
                <div id="recent-transactions"></div>
            </div>

            <!-- Add Buttons -->
            <button class="btn-primary" id="add-expense-btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
            <button class="btn-primary btn-secondary" id="add-income-btn">üíµ –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥</button>
        </div>

        <!-- Expenses Screen -->
        <div class="screen" id="expenses-screen">
            <div class="search-bar">
                <input type="text" class="search-input" id="search-input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é...">
            </div>

            <div class="category-filters" id="category-filters"></div>

            <div class="expenses-container">
                <div id="expenses-list"></div>
            </div>

            <button class="btn-primary" id="add-expense-btn-2" onclick="budgetApp.openAddModal('expense')" style="margin-top: 20px;">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
        </div>

        <!-- Plan Screen -->
        <div class="screen" id="plan-screen">
            <h2 style="margin-bottom: 20px;">üìã –ü–ª–∞–Ω —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
            <div class="plan-container" id="plan-list"></div>
        </div>

        <!-- Settings Screen -->
        <div class="screen" id="settings-screen">
            <div class="settings-container">
                <div class="settings-item">
                    <h3>üë• –ü—Ä–æ—Ñ–∏–ª–∏</h3>
                    <p>–°–µ–º—ë–Ω –∏ –¢–∞—Ç—å—è–Ω–∞</p>
                </div>

                <div class="settings-item">
                    <h3>‚òÅÔ∏è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h3>
                    <p>–ü–æ—Å–ª–µ–¥–Ω—è—è: <span id="last-sync-time">–ù–∏–∫–æ–≥–¥–∞</span></p>
                    <button class="btn-primary" id="sync-now-btn">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å</button>
                </div>

                <div class="settings-item">
                    <h3>‚ÑπÔ∏è –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h3>
                    <p>–í–µ—Ä—Å–∏—è: <span id="app-version">2.1</span></p>
                </div>

                <div class="settings-item">
                    <h3>üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</h3>
                    <p>–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ —Å–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</p>
                    <button class="btn-primary" id="clear-cache-btn" style="background: var(--error);">–û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-items">
            <a class="nav-item active" data-screen="dashboard">üè†</a>
            <a class="nav-item" data-screen="expenses">üìä</a>
            <a class="nav-item" data-screen="plan">üìã</a>
            <a class="nav-item" data-screen="settings">‚öôÔ∏è</a>
        </div>
    </nav>

    <!-- Transaction Modal -->
    <div class="modal" id="transaction-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</h2>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>

            <form id="transaction-form" onsubmit="return false;">
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" class="form-input" id="transaction-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ–¥—É–∫—Ç—ã" required>
                </div>

                <div class="form-group">
                    <label class="form-label">–°—É–º–º–∞ (‚ÇΩ)</label>
                    <input type="number" class="form-input" id="transaction-amount" placeholder="0" required>
                </div>

                <div class="form-group">
                    <label class="form-label">–î–∞—Ç–∞</label>
                    <input type="date" class="form-input" id="transaction-date" required>
                </div>

                <div class="form-group" id="category-group">
                    <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select class="form-select" id="transaction-category"></select>
                </div>

                <input type="hidden" id="transaction-type" value="expense">

                <button type="button" class="btn-primary" id="save-transaction">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- JS Files -->
    <script src="js/config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/sheets-sync.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
